(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{182:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("验证范围：")]),t._v(" "),t._m(2),t._v(" "),a("p",[t._v("验证方式：")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),a("p",[t._v("页面级权限在路由配置的时候配置即可。具体查看"),a("router-link",{attrs:{to:"/guide/basics/sidebar.html#配置项"}},[t._v("侧边栏配置项")])],1),t._v(" "),t._m(9),t._v(" "),t._m(10),t._m(11),t._v(" "),t._m(12),a("p",[t._v("或")]),t._v(" "),t._m(13),t._m(14),t._v(" "),t._m(15),t._v(" "),a("p",[t._v("本项目路由配置是预设写死在前端的，所以页面权限并不能动态配置。动态配置也就是将路由配置交给后端存储管理。")]),t._v(" "),a("p",[t._v("很多公司业务场景是动态配置的，其实两者验证原理是相同的，只是如何获取这份路由表的方式不同。")]),t._v(" "),a("p",[t._v("实现动态配置需要以下额外逻辑：")]),t._v(" "),t._m(16),t._v(" "),a("p",[t._v("本项目暂不实现，可以自行修改。")])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"权限验证"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#权限验证","aria-hidden":"true"}},[this._v("#")]),this._v(" 权限验证")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("本项目是根据"),s("code",[this._v("用户角色")]),this._v("来进行权限管理的。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("页面级")]),this._v(" "),s("li",[this._v("按钮级")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("路由拦截")]),this._v(" "),s("li",[this._v("指令")]),this._v(" "),s("li",[this._v("JS方法")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"权限逻辑"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#权限逻辑","aria-hidden":"true"}},[this._v("#")]),this._v(" 权限逻辑")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("登录成功后，获取用户信息会返回该用户的"),s("code",[this._v("用户角色")]),this._v("。页面级权限是通过路由钩子拦截，进行权限验证，决定是否通过。按钮级权限是通过渲染节点时，进行权限验证，决定是否渲染。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("ul",[a("li",[t._v("页面级代码："),a("code",[t._v("@/utils/permission.js")]),t._v("，自定义修改时，记得 "),a("code",[t._v("next()")]),t._v(" 释放钩子。")]),t._v(" "),a("li",[t._v("按钮级代码： "),a("code",[t._v("@/directive/permission/permission.js")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"使用方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用方法","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用方法")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"页面权限"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#页面权限","aria-hidden":"true"}},[this._v("#")]),this._v(" 页面权限")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"指令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指令","aria-hidden":"true"}},[this._v("#")]),this._v(" 指令")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-permission")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("['admin']"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-permission")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("['admin, visitor']"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"js方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js方法","aria-hidden":"true"}},[this._v("#")]),this._v(" JS方法")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-if")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("$checkPermission['admin']"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getArticle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" haspermission "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("$checkPermission")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'admin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("haspermission"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ....")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("注意")]),this._v(" "),s("p",[this._v("一些动态渲染dom的组件无法使用指令来完成，请使用JS方法。如：Element 的 "),s("code",[this._v("el-tab")]),this._v(" 组件。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"后话"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后话","aria-hidden":"true"}},[this._v("#")]),this._v(" 后话")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("登录成功后，根据"),a("code",[t._v("用户角色")]),t._v("去向后端请求可访问的路由表。")]),t._v(" "),a("li",[t._v("前端根据路由表映射到页面组件。")]),t._v(" "),a("li",[t._v("然后 "),a("code",[t._v("addRoutes")]),t._v(" 动态挂载到 "),a("code",[t._v("vue-router")]),t._v(" 上。")])])}],!1,null,null,null);s.default=n.exports}}]);