(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{178:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._m(14),t._v(" "),t._m(15),t._m(16),t._v(" "),t._m(17),t._m(18),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._v(" "),e("p",[t._v("更多配置请参照 "),e("a",{attrs:{href:"https://cli.vuejs.org/zh/guide/mode-and-env.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("环境变量和模式"),e("OutboundLink")],1)]),t._v(" "),t._m(22),t._v(" "),e("p",[t._v("如果你的项目并不需要多环境功能（无论本地、生产都是同一个请求基础链接）。你可以这样修改：")]),t._v(" "),t._m(23),e("p",[t._v("本地开发如果存在跨域，请查看 "),e("router-link",{attrs:{to:"/guide/basics/request.html#跨域问题"}},[t._v("跨域问题")])],1)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"多环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#多环境","aria-hidden":"true"}},[this._v("#")]),this._v(" 多环境")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("本项目自定义了一个 "),s("code",[this._v("sit")]),this._v(" 环境，并且创建了 "),s("code",[this._v("development")]),this._v(" 和 "),s("code",[this._v("production")]),this._v(" 环境文件，即可操作的环境有：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("development（开发）")]),this._v(" "),s("li",[this._v("sit（测试）")]),this._v(" "),s("li",[this._v("production（生产）")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境变量","aria-hidden":"true"}},[this._v("#")]),this._v(" 环境变量")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("项目的环境变量有 "),s("code",[this._v("VUE_APP_ENV_CONFIG")]),this._v(" 和 "),s("code",[this._v("VUE_APP_BASE_API")]),this._v("，你可以这样直接使用：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"根据环境切换请求基础链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#根据环境切换请求基础链接","aria-hidden":"true"}},[this._v("#")]),this._v(" 根据环境切换请求基础链接")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @/utils/request.js")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" baseURL "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VUE_APP_BASE_API")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"判断当前环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#判断当前环境","aria-hidden":"true"}},[this._v("#")]),this._v(" 判断当前环境")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 自定义")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VUE_APP_ENV_CONFIG")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'prod'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),s("p",[this._v("如果需要修改环境变量，找到根目录下对应的 "),s("code",[this._v("/.env.xxx")]),this._v(" 文件修改即可。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"自定义环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义环境","aria-hidden":"true"}},[this._v("#")]),this._v(" 自定义环境")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果需要自定义环境，你可以按以下示例来实现，如创建 "),s("code",[this._v("sit")]),this._v(" 环境：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("根目录下创建名为 "),s("code",[this._v(".env.sit")]),this._v(" 文件，并添加环境变量")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("NODE_ENV = production\nVUE_APP_BASE_API = 'http://www.example.com/sit'\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("打开 "),s("code",[this._v("package.json")]),this._v(" 文件，添加 script")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[this._v("// --mode sit 对应刚刚创建的 .env.sit 文件")]),this._v("\n"),s("span",{pre:!0,attrs:{class:"token string"}},[this._v('"build:sit"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[this._v(":")]),this._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[this._v('"vue-cli-service build --mode sit"')]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("项目中使用")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @/utils/request.js")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" instance "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" axios"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    baseURL"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" process"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VUE_APP_BASE_API")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("打包构建")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[this._v("npm")]),this._v(" run build:sit\n")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("打出来的 "),e("code",[t._v("dist")]),t._v(" 包，请求基础路径就是 "),e("code",[t._v("sit")]),t._v(" 环境的 "),e("code",[t._v("VUE_APP_BASE_API")]),t._v("，同理执行 "),e("code",[t._v("npm run build")]),t._v("，基础路径也就是 "),e("code",[t._v("production")]),t._v(" 环境的 "),e("code",[t._v("VUE_APP_BASE_API")]),t._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("TIP")]),this._v(" "),s("p",[this._v("NODE_ENV = production 是为了打包 sit 环境时，采用 production 模式。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"不使用多环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#不使用多环境","aria-hidden":"true"}},[this._v("#")]),this._v(" 不使用多环境")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @/utils/request.js")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" instance "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" axios"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    baseURL"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'www.example.com'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])}],!1,null,null,null);s.default=n.exports}}]);